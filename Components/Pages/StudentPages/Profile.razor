@page "/studentprofile"
@inject AuthStateService AuthStateService
@inject NavigationManager Navigation
@inject IJSRuntime JSRuntime
@using Microsoft.Data.Sqlite
@using System.Data
@using Thesis.Components.Layout
@layout MainLayout
@using Thesis.Components.Shared


<PageTitle>Thesis - Profile</PageTitle>

    <div class="dashboard-container">

    <!-- Main Content -->
    <div class="main-content">
        <!-- Top Header -->
        <div class="top-header">
            <div class="header-left">
                <h1>User Profile</h1>
                <p class="welcome-text">Manage your personal information and account settings</p>
            </div>
            <div class="header-actions">
                <button class="btn btn-outline" @onclick="ToggleEditMode">
                    <span class="btn-icon">✏️</span>
                    @(isEditing ? "Cancel" : "Edit Profile")
                </button>
                @if (isEditing)
                {
                    <button class="btn btn-primary" @onclick="SaveProfile">
                        <span class="btn-icon">💾</span>
                        Save Changes
                    </button>
                }
            </div>
        </div>

        <!-- Content Area -->
        <div class="content-area">
            @if (showSuccessMessage)
            {
                <div class="alert alert-success">
                    ✅ Profile updated successfully!
                </div>
            }

            @if (!string.IsNullOrEmpty(errorMessage))
            {
                <div class="alert alert-error">
                    ❌ @errorMessage
                </div>
            }

            <div class="profile-layout">
                <!-- Left Column - Profile Overview -->
                <div class="profile-sidebar">
                    <div class="profile-card">
                        <div class="profile-avatar-section">
                            <div class="avatar-large">
                                @GetUserInitials()
                            </div>
                            @if (!isEditing)
                            {
                                <h2 class="profile-name">@AuthStateService.CurrentUser?.Name</h2>
                                <div class="role-badge @(AuthStateService.CurrentUser?.Role?.ToLower())">
                                    @AuthStateService.CurrentUser?.Role
                                </div>
                                <p class="member-since">
                                    <span class="info-icon">📅</span>
                                    Member since @memberSince
                                </p>
                            }
                            else
                            {
                                <div class="form-group">
                                    <label for="displayName">Display Name</label>
                                    <input type="text" id="displayName" class="form-control" @bind="editName" />
                                </div>
                            }
                        </div>

                        <div class="profile-stats">
                            <h3>Activity Summary</h3>
                            <div class="stats-grid">
                                <div class="stat-item">
                                    <div class="stat-number">@projectCount</div>
                                    <div class="stat-label">Projects</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-number">@taskCount</div>
                                    <div class="stat-label">Tasks</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-number">@successRate%</div>
                                    <div class="stat-label">Success Rate</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column - Profile Details -->
                <div class="profile-main">
                    <!-- Personal Information Section -->
                    <div class="section-card">
                        <div class="section-header">
                            <h3>Personal Information</h3>
                            <span class="section-badge">Basic</span>
                        </div>
                        <div class="section-content">
                            <div class="info-grid">
                                <div class="info-item">
                                    <label>Username</label>
                                    @if (!isEditing)
                                    {
                                        <div class="info-value">@AuthStateService.CurrentUser?.Name</div>
                                    }
                                    else
                                    {
                                        <input type="text" class="form-control" @bind="editName" />
                                    }
                                    <div class="info-hint">Your unique identifier</div>
                                </div>
                                <div class="info-item">
                                    <label>Role</label>
                                    <div class="info-value role-value">@AuthStateService.CurrentUser?.Role</div>
                                    <div class="info-hint">Account permissions level</div>
                                </div>
                                <div class="info-item">
                                    <label>Account Status</label>
                                    <div class="info-value status-active">
                                        <span class="status-dot"></span>
                                        Active
                                    </div>
                                    <div class="info-hint">Your account is in good standing</div>
                                </div>
                                <div class="info-item">
                                    <label>Last Login</label>
                                    <div class="info-value">@lastLogin</div>
                                    <div class="info-hint">Most recent access</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Contact Information Section -->
                    <div class="section-card">
                        <div class="section-header">
                            <h3>Contact Information</h3>
                            <span class="section-badge">Optional</span>
                        </div>
                        <div class="section-content">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="email">Email Address</label>
                                    <input type="email" id="email" class="form-control"
                                           placeholder="your.email@example.com"
                                           @bind="email" disabled="@(!isEditing)" />
                                    <div class="form-hint">We'll never share your email</div>
                                </div>
                                <div class="form-group">
                                    <label for="phone">Phone Number</label>
                                    <input type="tel" id="phone" class="form-control"
                                           placeholder="+1 (555) 123-4567"
                                           @bind="phone" disabled="@(!isEditing)" />
                                    <div class="form-hint">For important notifications</div>
                                </div>
                                <div class="form-group full-width">
                                    <label for="bio">Bio</label>
                                    <textarea id="bio" class="form-control" rows="3"
                                              placeholder="Tell us a bit about yourself..."
                                              @bind="bio" disabled="@(!isEditing)"></textarea>
                                    <div class="form-hint">Max 200 characters</div>
                                    <div class="char-count">@bio.Length/200</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Security Section -->
                    <div class="section-card">
                        <div class="section-header">
                            <h3>Security</h3>
                            <span class="section-badge">Important</span>
                        </div>
                        <div class="section-content">
                            <div class="security-grid">
                                <div class="security-item">
                                    <div class="security-icon">🔒</div>
                                    <div class="security-info">
                                        <h4>Password</h4>
                                        <p>Last changed @passwordLastChanged</p>
                                    </div>
                                    <button class="btn btn-outline btn-sm" @onclick="ShowChangePassword">
                                        Change
                                    </button>
                                </div>
                                <div class="security-item">
                                    <div class="security-icon">📱</div>
                                    <div class="security-info">
                                        <h4>Two-Factor Authentication</h4>
                                        <p>Add an extra layer of security</p>
                                    </div>
                                    <button class="btn @(twoFactorEnabled ? "btn-outline" : "btn-primary") btn-sm"
                                            @onclick="ToggleTwoFactor">
                                        @(twoFactorEnabled ? "Disable" : "Enable")
                                    </button>
                                </div>
                                <div class="security-item">
                                    <div class="security-icon">📧</div>
                                    <div class="security-info">
                                        <h4>Login Notifications</h4>
                                        <p>Get alerts for new logins</p>
                                    </div>
                                    <label class="toggle">
                                        <input type="checkbox" @bind="loginNotifications"
                                               disabled="@(!isEditing)" />
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Activity Section -->
                    <div class="section-card">
                        <div class="section-header">
                            <h3>Recent Activity</h3>
                            <a href="#" class="view-all-link" @onclick="LoadAllActivity">View All</a>
                        </div>
                        <div class="section-content">
                            <div class="activity-timeline">
                                @foreach (var activity in recentActivities)
                                {
                                    <div class="activity-item">
                                        <div class="activity-icon @activity.Type">@activity.Icon</div>
                                        <div class="activity-content">
                                            <div class="activity-title">@activity.Title</div>
                                            <div class="activity-time">@activity.Time</div>
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Logout Confirmation Modal -->
@if (showLogoutModal)
{
    <div class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Confirm Logout</h3>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to logout?</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" @onclick="CloseLogoutModal">Cancel</button>
                <button class="btn btn-danger" @onclick="ConfirmLogout">Logout</button>
            </div>
        </div>
    </div>
}

<!-- Change Password Modal -->
@if (showPasswordModal)
{
    <div class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Change Password</h3>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="currentPassword">Current Password</label>
                    <input type="password" id="currentPassword" class="form-control" @bind="currentPassword" />
                </div>
                <div class="form-group">
                    <label for="newPassword">New Password</label>
                    <input type="password" id="newPassword" class="form-control" @bind="newPassword" />
                    <div class="form-hint">Password must be at least 6 characters</div>
                </div>
                <div class="form-group">
                    <label for="confirmPassword">Confirm New Password</label>
                    <input type="password" id="confirmPassword" class="form-control" @bind="confirmPassword" />
                </div>
                @if (!string.IsNullOrEmpty(passwordError))
                {
                    <div class="alert alert-error">@passwordError</div>
                }
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" @onclick="ClosePasswordModal">Cancel</button>
                <button class="btn btn-primary" @onclick="ChangePassword"
                        disabled="@(string.IsNullOrEmpty(newPassword) || newPassword != confirmPassword)">
                    Update Password
                </button>
            </div>
        </div>
    </div>
}

@code {
    private bool showLogoutModal = false;
    private bool showPasswordModal = false;
    private bool isEditing = false;
    private bool showSuccessMessage = false;
    private bool twoFactorEnabled = false;
    private bool loginNotifications = true;

    // Form fields
    private string editName = "";
    private string email = "";
    private string phone = "";
    private string bio = "";
    private string currentPassword = "";
    private string newPassword = "";
    private string confirmPassword = "";
    private string passwordError = "";
    private string errorMessage = "";

    // Display data
    private string memberSince = "";
    private string lastLogin = "";
    private string passwordLastChanged = "";
    private int projectCount = 0;
    private int taskCount = 0;
    private int successRate = 0;

    private List<ActivityItem> recentActivities = new();

    private string connectionString = "Data Source=Thesis.db";

    protected override async Task OnInitializedAsync()
    {
        await LoadUserData();
        await LoadActivityData();
        await LoadStats();
    }

    private async Task LoadUserData()
    {
        if (AuthStateService.CurrentUser != null)
        {
            editName = AuthStateService.CurrentUser.Name;

            try
            {
                using var connection = new SqliteConnection(connectionString);
                await connection.OpenAsync();

                var command = connection.CreateCommand();
                command.CommandText = "SELECT Name, Role, CreatedAt FROM Users WHERE Id = @id";
                command.Parameters.AddWithValue("@id", AuthStateService.CurrentUser.Id);

                using var reader = await command.ExecuteReaderAsync();
                if (await reader.ReadAsync())
                {
                    var createdAt = reader.GetString(2);
                    memberSince = DateTime.Parse(createdAt).ToString("MMMM yyyy");
                    lastLogin = DateTime.Now.ToString("MMM dd, yyyy 'at' h:mm tt");
                    passwordLastChanged = "3 months ago";

                    await InvokeAsync(StateHasChanged);
                }
            }
            catch (Exception ex)
            {
                errorMessage = "Error loading user data";
                await JSRuntime.InvokeVoidAsync("console.error", $"Error loading user data: {ex.Message}");
            }
        }
    }

    private async Task LoadStats()
    {
        projectCount = 24;
        taskCount = 156;
        successRate = 89;
        await Task.CompletedTask;
    }

    private async Task LoadActivityData()
    {
        recentActivities = new List<ActivityItem>
        {
            new ActivityItem { Icon = "✅", Type = "success", Title = "Project \"Thesis Dashboard\" completed", Time = "2 hours ago" },
            new ActivityItem { Icon = "🔔", Type = "info", Title = "Password changed successfully", Time = "1 day ago" },
            new ActivityItem { Icon = "👥", Type = "warning", Title = "New team member added to project", Time = "2 days ago" },
            new ActivityItem { Icon = "📊", Type = "primary", Title = "Monthly report generated", Time = "1 week ago" }
        };
        await InvokeAsync(StateHasChanged);
    }

    private async Task LoadAllActivity()
    {
        recentActivities.AddRange(new[]
        {
            new ActivityItem { Icon = "📝", Type = "info", Title = "Updated profile information", Time = "2 weeks ago" },
            new ActivityItem { Icon = "🔐", Type = "success", Title = "Two-factor authentication enabled", Time = "3 weeks ago" }
        });
        await InvokeAsync(StateHasChanged);
    }

    private string GetUserInitials()
    {
        var name = AuthStateService.CurrentUser?.Name ?? "";
        if (string.IsNullOrEmpty(name)) return "U";

        var parts = name.Split(' ', StringSplitOptions.RemoveEmptyEntries);
        if (parts.Length >= 2)
            return $"{parts[0][0]}{parts[1][0]}".ToUpper();

        return name.Length >= 2 ? name.Substring(0, 2).ToUpper() : name.ToUpper();
    }

    private void ToggleEditMode()
    {
        isEditing = !isEditing;
        errorMessage = "";
        if (!isEditing)
        {
            editName = AuthStateService.CurrentUser?.Name ?? "";
        }
        StateHasChanged();
    }

    private async Task SaveProfile()
    {
        if (string.IsNullOrWhiteSpace(editName))
        {
            errorMessage = "Name cannot be empty";
            await InvokeAsync(StateHasChanged);
            return;
        }

        try
        {
            using var connection = new SqliteConnection(connectionString);
            await connection.OpenAsync();

            var command = connection.CreateCommand();
            command.CommandText = "UPDATE Users SET Name = @name WHERE Id = @id";
            command.Parameters.AddWithValue("@name", editName.Trim());
            command.Parameters.AddWithValue("@id", AuthStateService.CurrentUser?.Id);

            var rowsAffected = await command.ExecuteNonQueryAsync();

            if (rowsAffected > 0)
            {
                // Update the auth state
                if (AuthStateService.CurrentUser != null)
                {
                    AuthStateService.CurrentUser.Name = editName.Trim();
                }

                showSuccessMessage = true;
                errorMessage = "";
                isEditing = false;

                await InvokeAsync(StateHasChanged);

                _ = Task.Delay(3000).ContinueWith(async _ =>
                {
                    showSuccessMessage = false;
                    await InvokeAsync(StateHasChanged);
                });
            }
            else
            {
                errorMessage = "Failed to update profile";
                await InvokeAsync(StateHasChanged);
            }
        }
        catch (Exception ex)
        {
            errorMessage = "Error saving profile";
            await JSRuntime.InvokeVoidAsync("console.error", $"Error saving profile: {ex.Message}");
            await InvokeAsync(StateHasChanged);
        }
    }

    private void ShowLogoutConfirmation()
    {
        showLogoutModal = true;
        StateHasChanged();
    }

    private void CloseLogoutModal()
    {
        showLogoutModal = false;
        StateHasChanged();
    }

    private async Task ConfirmLogout()
    {
        try
        {
            await AuthStateService.LogoutAsync();
            await InvokeAsync(StateHasChanged);
            Navigation.NavigateTo("/", true);
        }
        catch (Exception ex)
        {
            await JSRuntime.InvokeVoidAsync("console.error", $"Logout error: {ex.Message}");
        }
    }

    private void ShowChangePassword()
    {
        showPasswordModal = true;
        passwordError = "";
        currentPassword = "";
        newPassword = "";
        confirmPassword = "";
        StateHasChanged();
    }

    private void ClosePasswordModal()
    {
        showPasswordModal = false;
        StateHasChanged();
    }

    private async Task ChangePassword()
    {
        if (newPassword != confirmPassword)
        {
            passwordError = "Passwords do not match";
            await InvokeAsync(StateHasChanged);
            return;
        }

        if (newPassword.Length < 6)
        {
            passwordError = "Password must be at least 6 characters";
            await InvokeAsync(StateHasChanged);
            return;
        }

        try
        {
            using var connection = new SqliteConnection(connectionString);
            await connection.OpenAsync();

            var command = connection.CreateCommand();
            command.CommandText = "UPDATE Users SET Password = @password WHERE Id = @id";
            command.Parameters.AddWithValue("@password", newPassword);
            command.Parameters.AddWithValue("@id", AuthStateService.CurrentUser?.Id);

            var rowsAffected = await command.ExecuteNonQueryAsync();

            if (rowsAffected > 0)
            {
                recentActivities.Insert(0, new ActivityItem
                {
                    Icon = "🔒",
                    Type = "success",
                    Title = "Password changed successfully",
                    Time = "Just now"
                });

                showPasswordModal = false;
                await InvokeAsync(StateHasChanged);
            }
            else
            {
                passwordError = "Failed to update password";
                await InvokeAsync(StateHasChanged);
            }
        }
        catch (Exception ex)
        {
            passwordError = "Error changing password";
            await JSRuntime.InvokeVoidAsync("console.error", $"Error changing password: {ex.Message}");
            await InvokeAsync(StateHasChanged);
        }
    }

    private async Task ToggleTwoFactor()
    {
        twoFactorEnabled = !twoFactorEnabled;

        recentActivities.Insert(0, new ActivityItem
        {
            Icon = "📱",
            Type = "info",
            Title = $"Two-factor authentication {(twoFactorEnabled ? "enabled" : "disabled")}",
            Time = "Just now"
        });

        await InvokeAsync(StateHasChanged);
    }

    private class ActivityItem
    {
        public string Icon { get; set; } = "";
        public string Type { get; set; } = "";
        public string Title { get; set; } = "";
        public string Time { get; set; } = "";
    }
}
<style>
    :root {
        --bg-light: #f8fafc;
        --bg-white: #ffffff;
        --bg-panel: #f1f5f9;
        --text-dark: #1e293b;
        --text-muted: #64748b;
        --primary: #3b82f6;
        --primary-light: #dbeafe;
        --success: #22c55e;
        --danger: #ef4444;
        --warning: #f59e0b;
        --radius: 12px;
    }

    .dashboard-container {
        display: flex;
        height: 100vh;
        background: var(--bg-light);
        overflow: hidden;
        font-family: 'Inter', sans-serif;
    }

    .alert {
        padding: 0.75rem 1rem;
        border-radius: 8px;
        margin-bottom: 1rem;
        font-weight: 500;
    }

    .alert-success {
        background: #dcfce7;
        color: #166534;
        border: 1px solid #bbf7d0;
    }

    .alert-error {
        background: #fee2e2;
        color: #991b1b;
        border: 1px solid #fecaca;
    }

    .char-count {
        font-size: 0.75rem;
        color: #64748b;
        text-align: right;
        margin-top: 0.25rem;
    }

    .btn-sm {
        padding: 0.5rem 1rem;
        font-size: 0.875rem;
    }

    .btn-icon {
        margin-right: 0.5rem;
    }

    .form-group {
        margin-bottom: 1rem;
    }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #374151;
        }

    .view-all-link {
        color: #3b82f6;
        text-decoration: none;
        font-size: 0.875rem;
        font-weight: 500;
    }

        .view-all-link:hover {
            text-decoration: underline;
        }

    /* Ensure scrolling works */
    .dashboard-container {
        display: flex;
        height: 100vh;
        background: #f8fafc;
        overflow: hidden;
    }

    .main-content {
        flex: 1;
        display: flex;
        flex-direction: column;
        min-height: 0;
        overflow: hidden;
    }

    .content-area {
        flex: 1;
        padding: 2rem;
        overflow-y: auto;
        min-height: 0;
    }

    /* === MAIN CONTENT === */
    .main-content {
        flex: 1;
        display: flex;
        flex-direction: column;
        overflow-y: auto;
        padding: 2rem;
    }

    .top-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 1.5rem;
    }

    .header-left h1 {
        font-size: 1.75rem;
        font-weight: 700;
        color: var(--text-dark);
    }

    .welcome-text {
        color: var(--text-muted);
        font-size: 0.9rem;
        margin-top: 0.25rem;
    }

    .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        padding: 0.6rem 1.2rem;
        border-radius: var(--radius);
        border: 1px solid transparent;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .btn-outline {
        background: white;
        border-color: #d1d5db;
        color: var(--text-dark);
    }

        .btn-outline:hover {
            background: var(--primary-light);
            border-color: var(--primary);
            color: var(--primary);
        }

    .btn-danger {
        background: var(--danger);
        color: white;
    }

        .btn-danger:hover {
            background: #dc2626;
        }

    /* === PROFILE GRID === */
    .profile-layout {
        display: grid;
        grid-template-columns: 300px 1fr;
        gap: 1.5rem;
    }

    .profile-card {
        background: var(--bg-white);
        border-radius: var(--radius);
        overflow: hidden;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
        transition: transform 0.2s ease;
    }

        .profile-card:hover {
            transform: translateY(-2px);
        }

    .profile-avatar-section {
        text-align: center;
        padding: 2rem;
        background: linear-gradient(135deg, #6366f1, #3b82f6);
        color: white;
    }

    .avatar-large {
        width: 90px;
        height: 90px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        font-size: 1.75rem;
        margin: 0 auto 1rem;
    }

    .profile-name {
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 0.25rem;
    }

    .role-badge {
        background: rgba(255, 255, 255, 0.15);
        padding: 0.3rem 0.8rem;
        border-radius: 20px;
        font-size: 0.8rem;
        display: inline-block;
    }

    .member-since {
        font-size: 0.85rem;
        opacity: 0.9;
    }

    /* === SECTION CARDS === */
    .section-card {
        background: var(--bg-white);
        border-radius: var(--radius);
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
        overflow: hidden;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

        .section-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

    .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1.25rem 1.5rem;
        border-bottom: 1px solid #e2e8f0;
    }

        .section-header h3 {
            margin: 0;
            font-size: 1.1rem;
            color: var(--text-dark);
        }

    .section-badge {
        font-size: 0.75rem;
        padding: 0.2rem 0.6rem;
        border-radius: 6px;
        background: var(--primary-light);
        color: var(--primary);
    }

    .section-content {
        padding: 1.5rem;
    }

    /* === INFO GRID === */
    .info-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1.25rem;
    }

    .info-item label {
        font-size: 0.9rem;
        color: var(--text-muted);
        font-weight: 500;
    }

    .info-value {
        font-size: 1rem;
        font-weight: 600;
        color: var(--text-dark);
    }

    .info-hint {
        font-size: 0.8rem;
        color: var(--text-muted);
    }

    /* === ACTIVITY TIMELINE === */
    .activity-timeline {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .activity-item {
        display: flex;
        align-items: flex-start;
        gap: 1rem;
        padding: 0.75rem;
        border-radius: var(--radius);
        transition: background 0.2s ease;
    }

        .activity-item:hover {
            background: var(--bg-panel);
        }

    .activity-icon {
        width: 34px;
        height: 34px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
    }

    .activity-content .activity-title {
        font-weight: 500;
        color: var(--text-dark);
    }

    .activity-time {
        font-size: 0.8rem;
        color: var(--text-muted);
    }

    /* === MODAL === */
    .modal-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.6);
        display: flex;
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(4px);
        z-index: 50;
    }

    .modal-content {
        background: var(--bg-white);
        border-radius: var(--radius);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        max-width: 420px;
        width: 90%;
        overflow: hidden;
        animation: fadeIn 0.2s ease;
    }

    @@keyframes fadeIn {
        from

    {
        opacity: 0;
        transform: scale(0.95);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }

    }

    .modal-header, .modal-footer {
        padding: 1.25rem 1.5rem;
        border-bottom: 1px solid #e2e8f0;
    }

    .modal-footer {
        border-top: 1px solid #e2e8f0;
        display: flex;
        justify-content: flex-end;
        gap: 0.75rem;
    }

    .modal-body {
        padding: 1.5rem;
        color: var(--text-muted);
    }
</style>
